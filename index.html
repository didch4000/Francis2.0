<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√âditeur de Plans avec Panneaux de Signalisation</title>
    <!-- Ajout de la biblioth√®que Fabric.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
    <!-- Ajout de la biblioth√®que jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-wrapper">
        <!-- Barre d'outils -->
        <header class="toolbar">
            <div class="tool-group permanent-tools" id="project-tools">
                <strong>Projet :</strong>
                <button id="btn-save-project" title="Sauvegarder le projet" disabled>üíæ</button>
                <button id="btn-load-project" title="Charger un projet">üìÅ</button>
                <button id="btn-new-project" title="Nouveau projet">üìÑ</button>
            </div>
            <div class="tool-group" id="main-tools">
                <strong>Outils :</strong>
                <button id="btn-undo" class="tool" title="Annuler (Ctrl+Z)" disabled>‚Ü©Ô∏è</button>
                <button id="btn-redo" class="tool" title="R√©tablir (Ctrl+Y)" disabled>‚Ü™Ô∏è</button>
                <button id="btn-select" class="tool active" title="S√©lectionner Objet">üñêÔ∏è</button>
                <button id="btn-layer-move" class="tool" title="D√©placer Calque / Vue">‚ú•</button>
                <button id="btn-draw" class="tool" title="Dessiner Ligne">„Ä∞Ô∏è</button>
                <button id="btn-curve" class="tool" title="Dessiner Courbe">Ô∏µ</button>
                <button id="btn-circle" class="tool" title="Dessiner Cercle">‚ö™</button>
            </div>
            <div class="tool-group" id="measure-tools">
                <strong>Mesures :</strong>
                <button id="btn-scale" class="tool" title="D√©finir l'√©chelle graphiquement">üìè</button>
                <button id="btn-measure" class="tool" title="Mesurer une distance">Mesurer</button>
            </div>
            <div class="tool-group" id="zoom-tools">
                <strong>Vue :</strong>
                <button id="btn-zoom-out" title="Zoom arri√®re">-</button>
                <span id="zoom-level-display" title="Affichage en pourcentage">100%</span>
                <button id="btn-zoom-in" title="Zoom avant">+</button>
                <button id="btn-toggle-webview" title="Afficher la carte interactive">üåç</button>
                <button id="btn-fullscreen" title="Mode Plein √âcran">‚õ∂</button>
            </div>
            <div class="tool-group" id="object-tools">
                <strong>Ajouter Objet :</strong>
                <button id="btn-add-signs" title="Ajouter un Panneau">üö¶</button>
                <button id="btn-add-car" title="Ajouter Voiture">üöó</button>
                <button id="btn-add-arrow" title="Ajouter Fl√®che">‚û°Ô∏è</button>
                <button id="btn-add-text" title="Ajouter Texte">T</button>
                <button id="btn-crossing" class="tool" title="Dessiner Passage Pi√©ton">
    <svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
        <rect x="0" y="2" width="20" height="2" fill="currentColor"/>
        <rect x="0" y="6" width="20" height="2" fill="currentColor"/>
        <rect x="0" y="10" width="20" height="2" fill="currentColor"/>
        <rect x="0" y="14" width="20" height="2" fill="currentColor"/>
    </svg>
</button>
                <button id="btn-yield" class="tool" title="Dessiner C√©der le Passage">‚ñΩ</button>
                <button id="btn-fill" class="tool" title="Remplir une zone ferm√©e">üé®</button>
                <button id="btn-baseline" class="tool" title="Dessiner Ligne de Base">LB</button>
                <button id="btn-skid-mark" class="tool" title="Dessiner Trace de Freinage">
    <svg width="20" height="14" viewBox="0 0 20 14" xmlns="http://www.w3.org/2000/svg">
        <!-- Trace de freinage gauche -->
        <line x1="2" y1="0" x2="2" y2="5" stroke="currentColor" stroke-width="2"/>
        <line x1="2" y1="7" x2="2" y2="14" stroke="currentColor" stroke-width="2"/>
        <!-- Trace de freinage droite -->
        <line x1="18" y1="0" x2="18" y2="5" stroke="currentColor" stroke-width="2"/>
        <line x1="18" y1="7" x2="18" y2="14" stroke="currentColor" stroke-width="2"/>
    </svg>
</button>
                <button id="btn-add-landmark" class="tool" title="Ajouter un Point de Rep√®re">üìç</button>
                <span class="landmark-visibility-control">
                    <label for="toggle-landmarks-checkbox" style="cursor:pointer;" title="Afficher/Cacher les Rep√®res">üìç Visible :</label>
                    <input type="checkbox" id="toggle-landmarks-checkbox" checked>
                    <label for="toggle-landmark-coords-checkbox" style="cursor:pointer;" title="Afficher/Cacher les coordonn√©es des Rep√®res">Coords :</label>
                    <input type="checkbox" id="toggle-landmark-coords-checkbox" checked>
                </span>
            </div>
            <div class="tool-group options-group" id="drawing-options-tools" style="display: flex;">
                <strong>Options dessin :</strong>
                <label for="color-picker">Couleur:</label> <input type="color" id="color-picker" value="#000000">
                <label for="thickness-selector">√âpaisseur:</label>
                <select id="thickness-selector">
                    <option value="1">Tr√®s fine</option>
                    <option value="2" selected>Fine</option>
                    <option value="4">Moyenne</option>
                    <option value="8">√âpaisse</option>
                    <option value="16">Tr√®s √âpaisse</option>
                </select>
                <label for="dashed-checkbox">Pointill√©s:</label> <input type="checkbox" id="dashed-checkbox">
                <span id="dash-spacing-container" style="display: none;">
                    <label for="dash-spacing-selector">Espacement:</label>
                    <select id="dash-spacing-selector">
                        <option value="2">Serr√©</option>
                        <option value="4" selected>Normal</option>
                        <option value="8">Espac√©</option>
                        <option value="16">Tr√®s Espac√©</option>
                    </select>
                </span>
            </div>
            <div class="tool-group options-group" id="shape-options-tools" style="display: none;">
                <strong>Options formes :</strong>
                <label for="color-picker-shape">Couleur:</label> <input type="color" id="color-picker-shape" value="#000000">
                <label for="thickness-selector-shape">√âpaisseur:</label>
                <select id="thickness-selector-shape">
                    <option value="1">Tr√®s fine</option>
                    <option value="2" selected>Fine</option>
                    <option value="4">Moyenne</option>
                    <option value="8">√âpaisse</option>
                    <option value="16">Tr√®s √âpaisse</option>
                </select>
            </div>
            <div class="tool-group options-group" id="text-options-tools" style="display: none;">
                <strong>Texte :</strong>
                <label for="color-picker-text">Couleur:</label> <input type="color" id="color-picker-text" value="#000000">
                <label for="font-family-selector">Police:</label>
                <select id="font-family-selector">
                    <option value="Arial" selected>Arial</option>
                    <option value="Times New Roman">Times New Roman</option>
                    <option value="Helvetica">Helvetica</option>
                    <option value="Georgia">Georgia</option>
                    <option value="Verdana">Verdana</option>
                    <option value="Courier New">Courier New</option>
                </select>
                <label for="font-size-selector">Taille:</label>
                <select id="font-size-selector">
                    <option value="12">12</option>
                    <option value="14">14</option>
                    <option value="16">16</option>
                    <option value="18">18</option>
                    <option value="20" selected>20</option>
                    <option value="24">24</option>
                    <option value="28">28</option>
                    <option value="32">32</option>
                    <option value="36">36</option>
                    <option value="48">48</option>
                </select>
                <button id="font-bold-btn" class="text-style-btn" title="Gras">B</button>
                <button id="font-italic-btn" class="text-style-btn" title="Italique">I</button>
                <button id="font-underline-btn" class="text-style-btn" title="Soulign√©">U</button>
            </div>
            <div class="tool-group options-group" id="fill-options-tools" style="display: none;">
                <strong>Remplissage :</strong>
                <label for="color-picker-fill">Couleur:</label> <input type="color" id="color-picker-fill" value="#000000">
                <input type="radio" id="fill-type-solid" name="fill-type" value="solid" checked>
                <label for="fill-type-solid" style="cursor:pointer;">Solide</label>
                <input type="radio" id="fill-type-stripes" name="fill-type" value="stripes">
                <label for="fill-type-stripes" style="cursor:pointer;">Rayures</label>
                <span id="stripe-angle-container" style="display: none; align-items: center; gap: 8px;">
                    <label for="stripe-angle-slider">Angle:</label>
                    <input type="range" id="stripe-angle-slider" min="0" max="180" value="30" style="width: 80px;">
                    <span id="stripe-angle-display">30¬∞</span>
                    <label for="stripe-thickness-slider" style="margin-left: 10px;">√âpaisseur:</label>
                    <input type="range" id="stripe-thickness-slider" min="1" max="10" value="2" style="width: 80px;">
                    <span id="stripe-thickness-display">2px</span>
                 </span>
                <span style="display: flex; align-items: center; gap: 8px; margin-left: 10px;">
                    <label for="fill-tolerance-slider">Tol√©rance:</label>
                    <input type="range" id="fill-tolerance-slider" min="1" max="100" value="30" style="width: 80px;">
                    <span id="fill-tolerance-display">30</span>
                </span>
            </div>
            <div class="tool-group instructions-group" id="instructions-tools">
                <button id="btn-instructions">Instructions de d√©part</button>
            </div>
            <div class="tool-group" id="export-tools" style="margin-left: auto;">
                <button id="btn-export-png">Exporter en PNG</button>
                <button id="btn-export-pdf">Exporter en PDF</button>
            </div>
        </header>

        <!-- Zone de dessin principale -->
        <main id="canvas-container">
            <div id="scroll-content">
                <div id="zoom-wrapper">
                </div>
            </div>
            <div id="guide-message">
                <h2>Bienvenue dans l'√©diteur de plans</h2>
                <p><strong>1.</strong> Commencez par lire les <strong>Instructions de d√©part</strong> en cliquant sur le bouton en haut √† droite.</p>
                <p><strong>2.</strong> Ensuite, ajoutez une image de fond en utilisant le bouton üñºÔ∏è dans la barre des calques en bas.</p>
            </div>
        </main>
            <!-- Conteneur pour la vue web -->
            <div id="webview-container" style="display: none;">
                <iframe id="webview-frame" src=""></iframe>
                <button id="btn-close-webview">Retour √† l'√©diteur</button>
            </div>
        </main>

        <!-- Panneau des calques -->
        <footer class="layers-panel">
            <div class="layer-controls">
                <button id="add-image-btn" title="Ajouter une image de fond">üñºÔ∏è</button>
                <input type="file" id="image-loader" accept="image/*" style="display:none;">
                <button id="add-image-layer-btn" title="Ajouter un calque image">‚ûïüñºÔ∏è</button>
                <button id="btn-import-drone" title="Importer une vue Drone" disabled>üöÅ</button>
                <input type="file" id="image-layer-loader" accept="image/*" style="display:none;">
                <input type="file" id="drone-layer-loader" accept="image/*" style="display:none;">
                <button id="start-drawing-btn" title="Cr√©er un calque de dessin" style="display: none;">‚úèÔ∏è</button>
                <span class="separator"></span>
            </div>
            <ul id="layers-list">
                <!-- Les calques seront ajout√©s ici par JavaScript -->
            </ul>
        </footer>
    </div>
    
    <!-- Fen√™tre modale pour les panneaux -->
    <div id="signs-modal" class="modal">
        <div class="modal-content">
            <header class="modal-header">
                <h2>Choisissez un panneau de signalisation</h2>
                <span class="close-button">√ó</span>
            </header>
            <main id="signs-grid" class="modal-body"></main>
        </div>
    </div>

    <!-- Fen√™tre modale pour l'√©chelle -->
    <div id="scale-choice-modal" class="modal">
        <div class="modal-content" style="max-width: 600px; height: auto;">
            <header class="modal-header">
                <h2>D√©finir l'√©chelle</h2>
            </header>
            <main class="modal-body">
                <p>Choisissez une m√©thode pour d√©finir l'√©chelle :</p>
                <div class="scale-options" style="display: flex; gap: 20px; justify-content: center; margin-bottom: 20px;">
                    <div class="scale-option" id="scale-choice-1-500" style="cursor: pointer; border: 1px solid #ccc; padding: 15px; border-radius: 5px; text-align: center; width: 45%;">
                        <div style="font-weight: bold; margin-bottom: 10px; color: #3498db; font-size: 1.2em;">1:500</div>
                        <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 5px;">
                            <div style="border-left: 2px solid #3498db; border-right: 2px solid #3498db; border-bottom: 2px solid #3498db; height: 10px; width: 72px; position: relative;"></div>
                        </div>
                        <div style="color: #3498db; font-size: 0.9em;">10 m</div>
                        <div style="font-size: 0.8em; color: #666; margin-top: 10px;">Cliquez pour une calibration automatique (1:500)</div>
                    </div>
                    <div class="scale-option" id="scale-choice-1-250" style="cursor: pointer; border: 1px solid #ccc; padding: 15px; border-radius: 5px; text-align: center; width: 45%;">
                        <div style="font-weight: bold; margin-bottom: 10px; color: #3498db; font-size: 1.2em;">1:250</div>
                        <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 5px;">
                            <div style="border-left: 2px solid #3498db; border-right: 2px solid #3498db; border-bottom: 2px solid #3498db; height: 10px; width: 86px; position: relative;"></div>
                        </div>
                        <div style="color: #3498db; font-size: 0.9em;">6 m</div>
                        <div style="font-size: 0.8em; color: #666; margin-top: 10px;">Cliquez pour une calibration automatique (1:250)</div>
                    </div>
                </div>
                <button id="btn-manual-calibration" style="width: 100%; padding: 10px; background-color: #f0f0f0; border: 1px solid #ccc; cursor: pointer;">Calibrer manuellement avec l'outil r√®gle (üìè)</button>
            </main>
        </div>
    </div>

    <div id="scale-modal" class="modal">
        <div class="modal-content" style="max-width: 500px; height: auto;">
            <header class="modal-header">
                <h2>D√©finir l'√©chelle de l'image</h2>
                <span class="close-button" id="close-scale-modal">√ó</span>
            </header>
            <main class="modal-body">
                <p>Entrez l'√©chelle de l'image (ex: 1:X o√π 1cm sur le plan = X cm sur le terrain).</p>
                <div class="form-group">
                    <label for="scale-input-plan">Sur le plan :</label>
                    <span>1 cm</span>
                </div>
                <div class="form-group">
                    <label for="scale-input-terrain">√âquivaut √† (sur le terrain) :</label>
                    <input type="number" id="scale-input-terrain" min="1" placeholder="Ex: 500 (pour 1:500)">
                    <span>cm</span>
                </div>
                <div class="form-group">
                    <input type="checkbox" id="scale-unknown-checkbox">
                    <label for="scale-unknown-checkbox">√âchelle inconnue (d√©finir graphiquement plus tard)</label>
                </div>
                <button id="submit-scale-btn">Valider et Ajouter l'Image</button>
            </main>
        </div>
    </div>

    <!-- Fen√™tre modale pour les rep√®res -->
    <div id="landmark-modal" class="modal">
        <div class="modal-content" style="max-width: 500px; height: auto;">
            <header class="modal-header">
                <h2>Ajouter un Point de Rep√®re</h2>
                <span class="close-button" id="close-landmark-modal">√ó</span>
            </header>
            <main class="modal-body">
                <p>Entrez les coordonn√©es du rep√®re par rapport √† la ligne de base et au point 0 (en m√®tres).</p>
                <div class="form-group">
                    <label for="landmark-x-input">Abscisse (X) :</label>
                    <input type="number" id="landmark-x-input" value="0" placeholder="Distance horizontale">
                    <span>m</span>
                </div>
                <div class="form-group">
                    <label for="landmark-y-input">Ordonn√©e (Y) :</label>
                    <input type="number" id="landmark-y-input" value="0" placeholder="Distance verticale">
                    <span>m</span>
                </div>
                <button id="submit-landmark-btn">Ajouter le Rep√®re</button>
            </main>
        </div>
    </div>

    <!-- Fen√™tre modale pour les v√©hicules -->
    <div id="vehicle-modal" class="modal">
        <div class="modal-content" style="max-width: 500px; height: auto;">
            <header class="modal-header">
                <h2>Propri√©t√©s du V√©hicule</h2>
                <span class="close-button" id="close-vehicle-modal">√ó</span>
            </header>
            <main class="modal-body">
                <p>Configurez les propri√©t√©s du v√©hicule.</p>
                <div class="form-group">
                    <label for="vehicle-width-input">Largeur :</label>
                    <input type="number" id="vehicle-width-input" value="1.8" placeholder="ex: 1.8">
                    <span>m</span>
                </div>
                <div class="form-group">
                    <label for="vehicle-length-input">Longueur :</label>
                    <input type="number" id="vehicle-length-input" value="4.5" placeholder="ex: 4.5">
                    <span>m</span>
                </div>
                <div class="form-group">
                    <label for="vehicle-letter-input">Lettre d'identification :</label>
                    <input type="text" id="vehicle-letter-input" maxlength="1" placeholder="A" value="A">
                </div>
                <div class="form-group">
                    <label for="vehicle-color-input">Couleur :</label>
                    <input type="color" id="vehicle-color-input" value="#000000">
                </div>
                <div class="form-group">
                    <label for="vehicle-thickness-input">√âpaisseur du trait :</label>
                    <input type="range" id="vehicle-thickness-input" min="1" max="10" value="2">
                    <span id="vehicle-thickness-display">2px</span>
                </div>
                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 10px;">
                        <input type="checkbox" id="vehicle-dashed-input" style="width: auto;">
                        <span>Trait pointill√©</span>
                    </label>
                </div>
                <button id="submit-vehicle-btn">Ajouter le V√©hicule</button>
            </main>
        </div>
    </div>

    <!-- Fen√™tre modale pour le guide d'alignement -->
    <div id="alignment-guide-modal" class="modal">
        <div class="modal-content" style="max-width: 500px; height: auto;">
            <header class="modal-header">
                <h2>Aligner le nouveau calque</h2>
                <span class="close-button">√ó</span>
            </header>
            <main class="modal-body">
                <p>Le nouveau calque a √©t√© ajout√©. Veuillez l'aligner avec le plan de fond :</p>
                <ol>
                    <li>Utilisez le <strong>curseur d'opacit√©</strong> sur le calque (en bas) pour voir √† travers.</li>
                    <li>Avec l'outil <strong>D√©placer (‚ú•)</strong> actif, cliquez et glissez le calque pour le positionner correctement.</li>
                </ol>
                <button id="btn-validate-alignment" style="width: 100%; padding: 10px; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 15px; display: none;">Valider le positionnement</button>
            </main>
        </div>
    </div>

	<!-- Fen√™tre modale pour le choix d'ajout de calque -->
    <div id="add-layer-modal" class="modal">
        <div class="modal-content" style="max-width: 500px; height: auto;">
            <header class="modal-header">
                <h2>Ajouter un calque image</h2>
                <span class="close-button">√ó</span>
            </header>
            <main class="modal-body add-layer-options">
                <button id="btn-load-from-file">
                    <span class="icon">üìÅ</span>
                    <span>Charger un fichier</span>
                </button>
                <button id="btn-paste-from-clipboard">
                    <span class="icon">üìã</span>
                    <span>Coller depuis le presse-papiers</span>
                </button>
            </main>
        </div>
    </div>

    <!-- Fen√™tre modale pour la l√©gende PDF -->
    <div id="legend-modal" class="modal">
        <div class="modal-content" style="max-width: 600px; height: auto;">
            <header class="modal-header">
                <h2>L√©gende du document PDF</h2>
                <span class="close-button" id="close-legend-modal">√ó</span>
            </header>
            <main class="modal-body">
                <p>Veuillez v√©rifier et modifier la l√©gende si n√©cessaire.</p>
                <textarea id="legend-textarea" rows="10" style="width: 100%; box-sizing: border-box;"></textarea>
                <button id="submit-legend-btn">Valider et Exporter en PDF</button>
            </main>
        </div>
    </div>

    <!-- Fen√™tre modale pour la saisie de texte -->
    <div id="text-input-modal" class="modal">
        <div class="modal-content" style="max-width: 500px; height: auto;">
            <header class="modal-header">
                <h2>Ajouter du texte</h2>
                <span class="close-button" id="close-text-modal">√ó</span>
            </header>
            <main class="modal-body">
                <p>Entrez le texte que vous souhaitez ajouter au plan :</p>
                <div class="form-group">
                    <textarea id="text-input-textarea" placeholder="Tapez votre texte ici..." rows="4" style="width: 100%; box-sizing: border-box; resize: vertical;"></textarea>
                </div>
                <div class="form-group">
                    <button id="submit-text-btn" class="submit-button">Ajouter le texte</button>
                    <button id="cancel-text-btn" class="cancel-button">Annuler</button>
                </div>
            </main>
        </div>
    </div>

    <!-- Bulle de guidage pour l'outil ajouter calque dessin -->
    <div id="drawing-guide-tooltip" class="guide-tooltip" style="display: none;">
        <div class="tooltip-content">
            <p>Quand vous avez fini d'orienter le calque et de l'avoir centr√©, cliquez ici</p>
            <div class="tooltip-arrow"></div>
        </div>
    </div>

    <!-- Fen√™tre modale pour le disclaimer -->
    <div id="disclaimer-modal" class="modal" style="display: flex; z-index: 20000;">
        <div class="modal-content" style="max-width: 600px; height: auto; text-align: center; border: 2px solid #ff4444;">
            <header class="modal-header" style="justify-content: center; border-bottom: 1px solid #555;">
                <h2 style="color: #ff4444; margin: 0;">‚ö†Ô∏è AVERTISSEMENT IMPORTANT</h2>
            </header>
            <main class="modal-body" style="padding: 20px;">
                <p style="font-size: 16px; line-height: 1.6; margin-bottom: 20px; text-align: left;">
                    L‚Äôutilisateur est seul responsable de la v√©rification du r√©sultat final, notamment de l‚Äôexactitude des mesures, des coordonn√©es et des repr√©sentations graphiques.
                </p>
                <p style="font-size: 16px; line-height: 1.6; margin-bottom: 20px; text-align: left;">
                    Ce logiciel est fourni ¬´ tel quel ¬ª comme outil d‚Äôaide et peut comporter des approximations ou erreurs.
                </p>
                <p style="font-size: 16px; line-height: 1.6; margin-bottom: 20px; text-align: left;">
                    Le cr√©ateur du logiciel d√©cline toute responsabilit√© pour tout usage, d√©cision, dommage, perte ou cons√©quence li√©s aux r√©sultats obtenus ou √† leur interpr√©tation.
                </p>
                <p style="font-size: 16px; line-height: 1.6; margin-bottom: 30px; font-weight: bold; color: #eee; text-align: left; background-color: #3c3c3c; padding: 15px; border-radius: 5px; border-left: 4px solid #ff4444;">
                    En utilisant ce logiciel, vous vous engagez √† contr√¥ler et valider de mani√®re ind√©pendante toutes les informations avant toute utilisation, publication ou transmission.
                </p>
                <button id="accept-disclaimer-btn" style="background-color: #28a745; color: white; border: none; padding: 15px 30px; font-size: 18px; font-weight: bold; border-radius: 5px; cursor: pointer; width: 100%; transition: background-color 0.2s;">
                    J'ai lu et j'accepte les conditions
                </button>
            </main>
        </div>
    </div>

    <!-- SOLUTION SANS SERVEUR : Chargement des scripts dans l'ordre -->
    
    <!-- 1. D'abord l'√©tat global -->
    <script>
        // Namespace global pour √©viter les conflits
        window.PlanEditor = window.PlanEditor || {};
        console.log('‚úÖ Namespace PlanEditor cr√©√©');
    </script>
    
    <!-- 2. Ensuite les modules dans l'ordre de d√©pendance -->
    <script src="modules/state.js"></script>
    <script src="modules/layers.js"></script>
    <script src="modules/canvas.js"></script>
    <script src="modules/tools.js"></script>
    <script src="modules/project.js"></script>
    <script src="modules/ui.js"></script>
    <script src="modules/export.js"></script>
    <script src="modules/events.js"></script>
	<script src="modules/projections.js"></script>
    <script src="modules/layer-transform.js"></script>
    <!-- 3. Enfin l'initialisation -->
    <script src="app.js"></script>
</body>
</html>